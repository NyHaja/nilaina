const projects = [
    {
        "title": "Gestionnaire de tâches (To-Do List)",
        "image": "img/to_do.png",
        "description": "Une application web permettant de gérer une liste de tâches à faire.",
        "features": [
            "Ajouter, supprimer et marquer des tâches comme terminées.",
            "Utilisation de HTML pour la structure, CSS pour le style et JavaScript pour la logique de gestion des tâches."
        ],
        "modalContent": "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse ac tortor vitae velit malesuada efficitur id sed neque. ...",
        "modalImage": "img/to_do.png",
        "modalId": "project1",
        "extend": "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse ac tortor vitae velit malesuada efficitur id sed neque. Donec quis tellus a arcu volutpat vehicula. Quisque auctor risus at turpis vehicula faucibus. Proin sit amet ligula eget arcu viverra posuere. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Sed gravida arcu at leo condimentum ullamcorper. Nunc dictum mi in dolor consequat, sed faucibus augue convallis. Suspendisse sit amet lacinia risus. Sed nec aliquet lectus. Vivamus auctor nisi a enim sodales, at ullamcorper tortor volutpat.",
        "link": "https://git.unistra.fr/razafindrambola/"
    },
    {
        "title": "Blog Personnel",
        "image": "img/blog.png",
        "description": "Un site web où l'utilisateur peut publier des articles, les commenter et les partager.",
        "features": [
            "Système d'authentification, CRUD (Création, Lecture, Mise à jour, Suppression) des articles, système de commentaires.",
            "Utilisation de PHP et MySQL pour la gestion des données, HTML/CSS/JavaScript pour l'interface utilisateur."
        ],
        "modalContent": "Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Phasellus non ipsum nec mauris convallis suscipit. ...",
        "modalImage": "img/blog.png",
        "modalId": "project2",
        "extend": "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse ac tortor vitae velit malesuada efficitur id sed neque. Donec quis tellus a arcu volutpat vehicula. Quisque auctor risus at turpis vehicula faucibus. Proin sit amet ligula eget arcu viverra posuere. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Sed gravida arcu at leo condimentum ullamcorper. Nunc dictum mi in dolor consequat, sed faucibus augue convallis. Suspendisse sit amet lacinia risus. Sed nec aliquet lectus. Vivamus auctor nisi a enim sodales, at ullamcorper tortor volutpat.",
        "link": "https://git.unistra.fr/razafindrambola/"
    },
    {
        "title": "Calculatrice en ligne",
        "image": "img/calc.png",
        "description": "Une application web pour effectuer des opérations mathématiques de base.",
        "features": [
            "Addition, soustraction, multiplication, division, gestion des décimales.",
            "Utilisation de HTML pour les boutons et l'affichage, JavaScript pour la logique de calcul."
        ],
        "modalContent": "Maecenas tempus, lacus in maximus volutpat, sapien ex vehicula dolor, nec convallis dui odio ac enim. Aliquam convallis scelerisque nisl sit amet eleifend. ...",
        "modalImage": "img/calc.png",
        "modalId": "project3",
        "extend": "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse ac tortor vitae velit malesuada efficitur id sed neque. Donec quis tellus a arcu volutpat vehicula. Quisque auctor risus at turpis vehicula faucibus. Proin sit amet ligula eget arcu viverra posuere. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Sed gravida arcu at leo condimentum ullamcorper. Nunc dictum mi in dolor consequat, sed faucibus augue convallis. Suspendisse sit amet lacinia risus. Sed nec aliquet lectus. Vivamus auctor nisi a enim sodales, at ullamcorper tortor volutpat.",
        "link": "https://git.unistra.fr/razafindrambola/"
    },
    {
        "title": "Galerie d'images",
        "image": "img/galerie.png",
        "description": "Une galerie d'images en ligne où les utilisateurs peuvent visualiser et télécharger des images.",
        "features": [
            "Affichage des images, possibilité de zoomer, téléchargement des images.",
            "Utilisation de HTML/CSS pour la mise en page, JavaScript pour la fonctionnalité de zoom et de téléchargement."
        ],
        "modalContent": "Pellentesque habitant morbi maximus volutpat, sapien ex vehicula dolor, nec convallis dui odio ac enim. Aliquam convallis scelerisque nisl sit amet eleifend. ...",
        "modalImage": "img/galerie.png",
        "modalId": "project4",
        "extend": "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse ac tortor vitae velit malesuada efficitur id sed neque. Donec quis tellus a arcu volutpat vehicula. Quisque auctor risus at turpis vehicula faucibus. Proin sit amet ligula eget arcu viverra posuere. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Sed gravida arcu at leo condimentum ullamcorper. Nunc dictum mi in dolor consequat, sed faucibus augue convallis. Suspendisse sit amet lacinia risus. Sed nec aliquet lectus. Vivamus auctor nisi a enim sodales, at ullamcorper tortor volutpat.",
        "link": "https://git.unistra.fr/razafindrambola/"
    },
    {
        "title": "Jeu de mots cachés",
        "image": "img/mot.png",
        "description": "Un jeu de mots cachés où les joueurs doivent trouver des mots dans une grille de lettres.",
        "features": [
            "Génération aléatoire de la grille, vérification des mots trouvés, système de points.",
            "Utilisation de JavaScript pour générer la grille et vérifier les réponses des joueurs."
        ],
        "modalContent": "Lacus in maximus volutpat, sapien ex vehicula dolor, nec convallis dui odio ac enim. Aliquam convallis scelerisque nisl sit amet eleifend. ...",
        "modalImage": "img/mot.png",
        "modalId": "project5",
        "extend": "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse ac tortor vitae velit malesuada efficitur id sed neque. Donec quis tellus a arcu volutpat vehicula. Quisque auctor risus at turpis vehicula faucibus. Proin sit amet ligula eget arcu viverra posuere. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Sed gravida arcu at leo condimentum ullamcorper. Nunc dictum mi in dolor consequat, sed faucibus augue convallis. Suspendisse sit amet lacinia risus. Sed nec aliquet lectus. Vivamus auctor nisi a enim sodales, at ullamcorper tortor volutpat.",
        "link": "https://git.unistra.fr/razafindrambola/"
    },
    {
        "title": "Application de météo",
        "image": "img/meteo.png",
        "description": "Une application web qui fournit des informations météorologiques en temps réel.",
        "features": [
            "Affichage de la température, de l'humidité, des prévisions météo, localisation automatique.",
            "Utilisation d'une API météo pour récupérer les données, HTML/CSS/JavaScript pour l'interface utilisateur et l'affichage des informations."
        ],
        "modalContent": "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse ac tortor vitae velit malesuada efficitur id sed neque. ...",
        "modalImage": "img/meteo.png",
        "modalId": "project6",
        "extend": "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse ac tortor vitae velit malesuada efficitur id sed neque. Donec quis tellus a arcu volutpat vehicula. Quisque auctor risus at turpis vehicula faucibus. Proin sit amet ligula eget arcu viverra posuere. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Sed gravida arcu at leo condimentum ullamcorper. Nunc dictum mi in dolor consequat, sed faucibus augue convallis. Suspendisse sit amet lacinia risus. Sed nec aliquet lectus. Vivamus auctor nisi a enim sodales, at ullamcorper tortor volutpat.",
        "link": "https://git.unistra.fr/razafindrambola/"
    }
]
    

/////////////////////////////////////

/////////////////////////////////////
/// Affichage des modifications dans les cas d'affichage de la section en question
    const presentation = document.querySelector('.presentation');
    const profil = document.querySelector('.profil');

    const options = {
        threshold: 0.5 // Déclencher lorsque 50% de l'élément est visible
    };

    const observer = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                if (entry.target === presentation) {
                    presentation.classList.add('modified-presentation');
                } else if (entry.target === profil) {
                    profil.classList.add('modified-profil');
                }
            } else {
                if (entry.target === presentation) {
                    presentation.classList.remove('modified-presentation');
                }
            }
        });
    }, options);

    observer.observe(presentation);
    observer.observe(profil);


/////////////////////////////////////
/// Affichage de Nom 
    const textContainer = document.getElementById('nom');
    const textToDisplay = 'Nilaina Michael Razafindrambola';

    let index = 0;

    function displayNextCharacter() {
        if (index < textToDisplay.length) {
            const char = textToDisplay.charAt(index);
            textContainer.textContent += char;
            index++;

            if(char === ' '){
                setTimeout(displayNextCharacter, 200); // Delai de 200ms si le caractère est un espace
            } else {
                setTimeout(displayNextCharacter, 100); // Delai de 100ms entre chaque caractere (ajustable selon vos besoins)
            }
        }
    }
    displayNextCharacter();

/////////////////////////////////////
/// Affichage des detailles du projet
    // Sélectionnez tous les boutons "Plus de détails" qui doivent ouvrir le modal
    const modalTriggers = document.querySelectorAll(".read-more.modal-trigger");

    // Ajoutez un écouteur d'événements click à chaque bouton
    modalTriggers.forEach(trigger => {
        trigger.addEventListener("click", (event) => {
            // Selectionnez le modal correspondant à ce bouton
            const modalId = trigger.closest('.box').querySelector('.modal-container').getAttribute('id');
            const modal = document.getElementById(modalId);

            modal.classList.add("active");
            event.preventDefault();
        });
    });

    // Selectionnez tous les boutons de fermeture de modal
    const closeButtons = document.querySelectorAll(".close-modal");

    closeButtons.forEach(button => {
        button.addEventListener("click", () => {
            const modal = button.closest('.modal-container');
            modal.classList.remove("active");
        });
    });

/////////////////////////////////////
/// Affichage sticky
    window.addEventListener('scroll', function() {
        const introElement = document.querySelector('.project .intro');
        const introRect = introElement.getBoundingClientRect();
        
        if (introRect.top === 0 && window.getComputedStyle(introElement).position === 'sticky') {
            introElement.classList.add('intro-top');
        } else {
            introElement.classList.remove('intro-top');
        }
    });

/////////////////////////////////////
// Fonction pour charger et afficher les projets à partir du fichier JSON
    function loadProjects() {
        const selection = document.getElementById('selection');

        // Parcourir les projets et les ajouter au conteneur
        projects.forEach(project => {
            const projectHTML = `
                <article class="box">
                    <section class="img"><img src="${project.image}" alt="illustration"></section>
                        <section class="text">
                            <h2>${project.title}</h2>
                            <p>
                                <ul>
                                    <li>Description : ${project.description}</li>
                                    <li>Fonctionnalités : ${project.features}</li>
                                    <li>Exemple de code : ${project.modalContent}</li>
                                </ul>
                            </p>
                            <p class="read-more modal-trigger">Plus de detailles<span class="arrow"></span></p>
                            <!-- Fenetre modal en js -->
                            <article class="modal-container" id="${project.modalId}">
                                <div class="overlay modal-trigger"></div>
                                <div class="modal" role="dialog">
                                    <i class="close-modal modal-trigger fa-solid fa-circle-xmark"></i>
                                    <section><img src="${project.modalImage}" alt="illustration"></section>
                                    <h2>${project.title}</h2>
                                    <p>${project.extend}</p>
                                    <p>lien git : ${project.link}</p>
                                </div>
                            </article>
                            <!-- /////////////////// -->
                        </section>
                    </section>
                </article>
            `;
            selection.innerHTML += projectHTML;
        });
    }
    loadProjects();
